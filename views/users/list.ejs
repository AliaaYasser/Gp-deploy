<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../../public/stylesheets/viewstyle.css"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="../../public/stylesheets/popup.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="shortcut icon" href="../images/i learn.png"  type="image/png" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
            integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
            crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>
            
    <link rel="shortcut icon" href="/public/images/i learn.png"  type="image/png" />

    <script>
        function assagin_instructor() {
            alert("instructor x assind to course name y");
        }
    </script>
    <style>
        .checked {
            color: orange;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }

        td,th {
            height: 50px;
            text-align: center;

        }

         .wrapper{
             min-height: 100%;
             margin-bottom: -50px;
         }
        .footer,.push{
            height: 50px;
        }
        .dropbtn {
  background-color: #333;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
  cursor: pointer;
  border-radius: 8%;
}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  right: 0;
  background-color: #f9f9f9;
  min-width: 100px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.dropdown-content a {
  padding: 10px 10px;
  text-decoration: none;
  display: block;
  font-size: 20px;
}

.dropdown:hover .dropdown-content {display: block;}

    </style>
</head>

<body >
    <% include ../viewcommn/adminComman.ejs%>

    <div style="height: 100%;width:90%; margin-left:5%;margin-right:5%">
        <div >
            <div >  
                <div style="background-color: rgba(27, 151, 170,0.08);padding: 2%;border-radius: 1%;">
                    <h3><i class="fa fa-users"></i>&nbsp;<b>Users Management</b>
                        <div class="dropdown" style="float:right;">
                            <button class="dropbtn">Options</button>
                            <div class="dropdown-content" style="width: 20px;">
                              <br>
                              <a id="modalBtn" style="color:#333;cursor: pointer;"> <i class="fa fa-user-plus"></i>  Add user</a> 
                              <hr>
                              <a onclick="myFunction('addbulk')" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-object-group"></i>  Add bulk</a>  
                              <hr>
                              <a href="/users/list/all" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-users"></i> All users</a> 
                              <hr>
                              <a href="/users/list/admin" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-cog"></i>  Admins List</a>  
                              <hr>
                              <a href="/users/list/instructor" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-users"></i>  Instructors list</a>  
                              <hr>
                              <a href="/users/list/student" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-user"></i>  Students List</a>
                              <br>   
                              <% if(status == 'Opened') { %>
                                <a href="/users/upgradelevel" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-spinner"></i>  Upgrade Students Level</a>
                                <br>
                             <% } %>
                            </div>
                    </div>
                    
                    </h3>
                    <p>Here is a list of all users in the system, and you can manage anything related to users from here.</p>    
                </div>


                <div style="border: 3px solid rgba(27, 151, 170,0.08);padding: 2%;border-radius: 1%;margin-bottom: 3%;display: none;margin-top: 3%;" id="addbulk">
                    <h4><i class="fa fa-object-group"></i><b> Add Bulk Form</b></h4>
                    <form action="/userbulkinsert" method="post" enctype="multipart/form-data">
                        <input type="file" name="csv" > 
                    <button type="submit" class="btn btn-lg btn-primary"> submit</button> <br><br>
                    select suitable (.csv) file to add multiple users
                    </form>
                  </div>
<!--                  
                    <div class="btn-group" style="margin-left: 7%;background-color: #333;">
                       <a href="/users/list/all"> <button type="button" class="btn btn-dark" style="margin-right: 10;">All</button></a>
                       <a href="/users/list/admin"> <button type="button" class="btn btn-dark" style="margin-right: 10;">Admin</button></a>
                       <a href="/users/list/student"><button type="button" class="btn btn-dark">Student</button></a>
                       <a href="/users/list/instructor"> <button type="button" class="btn btn-dark">Instructor</button></a>
                       
                      </div> -->
                   
                </h3>

                <!-- <button id="modalBtn" class="button">click here</button> -->
                   <div id="simpleModal" class="modal">
                       <div class="modal-content">
                           <div class="modal-header">
                               <span class="closeBtn">&times;</span>
                               <h2> Create user </h2>
                           </div>

                           <div class="modal-body">
                               <form action="/users/create" method="POST">
                                   <div class="input-group mb-3">
                                       <div class="input-group-prepend">
                                           <span class="input-group-text">user name</span>
                                       </div>
                                       <input type="text" class="form-control" name="username" required>
                                   </div>

                                   <div class="input-group mb-3">
                                       <div class="input-group-prepend">
                                           <span class="input-group-text">Password</span>
                                       </div>
                                       <input type="password" class="form-control" name="password" required>
                                   </div>
                                   <div class="input-group mb-3">
                                       <div class="input-group-prepend">
                                           <span class="input-group-text">email</span>
                                       </div>
                                       <input type="email" class="form-control" name="email" required>
                                   </div>

                                   <div class="form-group">
                                       <label class="col-sm-3 form-control-label">user type</label>
                                       <div class="col-sm-9">
                                           <select name="userRole" class="form-control mb-3" id="userRole" required>
                                           <option  display value="">select user type</option>
                                               <%   if (role=='super admin'){ %>
                                                   <option value="admin" >admin</option>
                                               <% }   %>
                                               <option value="instructor">instructor</option>
                                               <option value="student">student</option>
                                           </select>
                                       </div>

                                   <div class="form-group" id="admin" class="selectDBType" style="display:none;">

                                       <div class="col-sm-9">
                                        <label class="col-sm-3 form-control-label">department</label>
                                           <select name="department" class="form-control mb-3">
                                               <% for(let department of departments) { %>
                                                   <option ><%= (department.deptName) %> </option>
                                               <% } %>
                                           </select>
                                       </div></div>
                                         <div class="col-sm-9"  id="student" class="selectDBType" style="display:none;">
                                         <label>level</label>
                                          <select name="level" class="form-control mb-3" >

                                                <option >level 1</option>
                                               <option  >level 2</option>
                                              <option >level 3</option>
                                              <option >level 4</option>
                                          </select>
                                      </div>
                                       </div>
                                   <div class="modal-footer">
                                       <button type="submit" class="btn btn-info">
                                           save user
                                       </button>
                                   </div>
                               </form>
                           </div>


                       </div>

                   </div>


                <div>  
     <form action="/users/deletemultipleusers" method="post" >

    <table class="table" style="text-align:center;">
<form action="/users/deletemultipleusers" method="post" >
        <thead >
            <tr>
              <th> select</th>
              <th> name</th>
              <th>email</th>
              <th>userRole</th>
              <th>department</th>
              <th>edite</th>
              <th>delete</th>

              </tr>
        </thead>
        <tbody>
        <% for(let user of Users) { %> 
            <tr>
              <td>  <div class="checkbox">
                <label><input name="selected" type="checkbox" value="<%= (user._id) %>"> </label>
            </div> </td>

              <td><%= (user.userName) %> </td>
              <td><%= (user.email) %></td>
              <td><%= (user.userRole) %></td>
              <% if(user.department) { %>
              <td><%= (user.department) %></td>
              
              <% } else { %>  
                <td> not acdemic member</td>
                <% }%>
                <td><a href="../../users/edituser/<%= user.id%>?edit=true""  class=" btn btn-info"><i class="fa fa-edit"></i>edite</a></td>
                <td><!-- <a onclick="Delete()" class="btn btn-danger" style="color: white;"><i class="fas fa-times"></i> delete</a> -->
                    <form action="/users/deletee/<%= user.id %>" method="POST">
                        <button type="submit"  class="btn btn-danger" style="color: white;"><i class="fas fa-trash"></i> Delete</button>
                    </form>
                </td>
                
            </tr>

            <% } %>
        </tbody>
    </table>
    <div class="text-center" style="float: left;"><button type="submit" class="btn btn-danger" style="color: white;">Delete selected users</button></div>   <br>
</form> 

      </div>
        </div>
    </div>
</div>

<div class="push"></div>
<div style="margin-top: 15%;">
<% include ../viewcommn/footer.ejs %>
</div>
<script src="../../public/javascripts/popup.js">
</script>
<script>
    function Delete() {
        alert("user X deleted successfully");
    }
    function assagin_instructor(uid,CourseId) {
        alert("you send reqest to "+uid+" wait for response"+CourseId);
    }
</script>
<script>
    function myFunction(name) {
      var x = document.getElementById(name);    
      if (x.style.display === "none") {
        x.style.display = "block";
      } else {
        x.style.display = "none";
      }
    }
    </script> 
</body>
</html>


