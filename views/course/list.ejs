<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../stylesheets/viewstyle.css"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="../../stylesheets/popup.css">
          <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
            integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
            crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>
  
    
    <style>
    .wrapper{
            min-height: 100%;
            margin-bottom: -50px;
        }
        .footer,.push{
            height: 50px;
        }
        .checked {
  color: orange;
}
.dropbtn {
  background-color: #333;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
  cursor: pointer;
  border-radius: 8%;
}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  right: 0;
  background-color: #f9f9f9;
  min-width: 100px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.dropdown-content a {
  padding: 10px 10px;
  text-decoration: none;
  display: block;
  font-size: 20px;
}

.dropdown:hover .dropdown-content {display: block;}

    </style>

</head>

<body style="height: 100%;">
    <% include ../viewcommn/adminComman.ejs%>
    <div style="background-color: rgba(27, 151, 170,0.08);padding: 2%;border-radius: 1%;margin-left: 5%;margin-right: 5%;">
      <h3><i class="fa fa-book"></i>&nbsp;<b>Courses Management</b>
        <div class="dropdown" style="float:right;">
                  <button class="dropbtn">Options</button>
                  <div class="dropdown-content" style="width: 20px;">
                    <br>
                    <a id="modalBtn" style="color:#333;cursor: pointer;"> <i class="fa fa-book"></i>  Add course</a> 
                    <hr>
                    <a onclick="myFunction('addbulk')" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-object-group"></i>  Add bulk</a>  
                    <hr>
                    <a href="assignreq" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-inbox"></i>  Instructors requests</a>  
                    <hr>
                    <a href="/course/studentrequest" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-users"></i>  Students requests</a>  
                    <hr>
                    <a href="/users/studentslist" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-user"></i>  Register students</a>
                    <hr>
                    <a href="/course/addDepartment" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-sitemap"></i>  Manage Departments</a>
                    <br>                  
                  </div>
          </div>
      </h3>
      <p>Here is a list of all courses in the system, and you can manage anything related to course from here.</p>    
  </div>

  <div style="border: 3px solid rgba(27, 151, 170,0.08);padding: 2%;border-radius: 1%;margin-left: 5%;margin-right: 5%;display: none;margin-top: 3%;margin-bottom: 3%;" id="addbulk">
    <h4><i class="fa fa-object-group"></i><b> Add Bulk Form</b></h4>
  <form action="/coursebulkinsert" method="post" enctype="multipart/form-data">
    <input type="file" name="csv" > 
    <button type="submit" class="btn btn-lg btn-primary" style="height: 8%;"> submit</button> <br><br>
    select suitable (.csv) file to add multiple courses.
    </form>
  </div>

    <div style="width:90%;margin-left:5%;margin-right: 5%;">
        <div>
            <div > 

             <!-- <form action="/coursebulkinsert" method="post" enctype="multipart/form-data">
                    <input type="file" name="csv" > 
                    <button type="submit" class="btn btn-lg btn-primary" style="height: 8%;"> submit</button> <br>
                    select suitable (.csv) file to add multiple coursees
                
            </form> -->
    
                <!-- <h3 style="margin-left: 15px;"><b> Courses Management</b> <a id="modalBtn" class="btn btn-info" style="color: white;">Add Course <i class="fa fa-plus"></i></a></h3> -->
            
            
             <!-- <button id="modalBtn" class="button">click here</button> -->
                <div id="simpleModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <span class="closeBtn">&times;</span>
                            <h2>Create course </h2>
                        </div>
                        
                        <div class="modal-body">
                            <form action="/course/create" method="POST"  >
                                <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                      <span class="input-group-text">Course Name</span>
                                    </div>
                                    <input type="text" class="form-control" name="name">
                                  </div>
                                  <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                  <div class="form-group">
                                    <label class="input-group-text" for="inputGroupSelect01">Pre-Requested</label></div>
                                    <div class="col-sm-9">
                                      <select name="prereq" class="form-control mb-3">
                                        <option > None </option>
                                       <% for(let cou of courses) { %>
                                           <option ><%= (cou.courseName) %> </option>
                                             <% } %>
                                         </select>
                                        </div></div></div>

                                  <div class="input-group mb-3">
                                    <div class="input-group-prepend">
                                      <span class="input-group-text">Course Houre</span>
                                    </div>
                                    <input type="number" class="form-control" name="hourse">
                                  </div>
                                     <div class="input-group mb-3">
                                               <div class="input-group-prepend">
                                                 <span class="input-group-text">number of student</span>
                                               </div>
                                               <input type="number" class="form-control" name="num">
                                             </div>
                                             <div class="input-group mb-3">
                                              <div class="input-group-prepend">
                                          
                                            <div class="form-group">
                                 <label class="input-group-text" for="inputGroupSelect01">department</label> </div>
                                 <div class="col-sm-9">
                                   <select name="department" class="form-control mb-3">
                                    <% for(let department of Department) { %>
                                        <option ><%= (department.deptName) %> </option>
                                          <% } %>
                                      </select>
                                     </div></div> </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn btn-info">
                                        save course
                                    </button>
                                </div>
                            </form>
                        </div>


                    </div>

                </div>


        <div>
 <form action="/course/deletemultiplecourses" method="post" >
    <table class="table" style="text-align:center;border: 1px solid rgba(27, 151, 170,0.08);">
        <thead >
            <tr >
              <th>Select</th>
              <th>Name</th>
              <th>Department</th>
              <th>Rate</th>
              <th>Edit</th>
              <th>Delete</th>
              <th>Assign</th>
              <th>Enroll bulk 
                <!-- <h6>select suitable (.csv) file to enroll multiple users </h6>   -->
              </th>
              </tr>
        </thead>
        <tbody>
        <% for(let course of courses) { %>
            <tr>
              <td>  <div class="checkbox">
                <label><input name="selected" type="checkbox" value="<%= (course._id) %>"> </label>
                </div> </td>
              <td><%= (course.courseName) %> </td>
             <td><%= (course.department) %> </td>
              <td>
                <progress value="<%= (course.courseRate) %>" max="100"></progress> <%= (course.courseRate) %> %
                </td>
                <td><a href="/course/editcourse/<%= course.id%>?edit=true"  class=" btn btn-info"><i class="fa fa-edit"></i> edite</a></td>
                 <td><!--<a onclick="Delete()" class="btn btn-danger" style="color: white;"><i class="fas fa-times"></i> delete</a> -->
                   <a href="/course/deletecourse/<%= course.id %>" class=" btn btn-danger"><i class="fa fa-trash"></i> Delete</a></a>
                </td>
                <td>
                <a href="../users/list/instructor/<%=(course.courseName)%>" class="btn btn-light"><i class="material-icons">how_to_reg</i> assign</a>
              </td>
              <td style="width: 40%;">
                <a onclick="myFunction('<%= (course._id) %>')" style="color:#333;cursor: pointer;text-decoration: none;"> <i class="fa fa-object-group"></i>  click to Enroll</a>  
                <div id="<%= (course._id) %>" style="border: 3px solid rgba(27, 151, 170,0.08);padding: 2%;border-radius: 1%;margin-left: 5%;margin-right: 5%;display: none;">
                <h5><b>Upload bulk to <%=(course.courseName)%></b></h5> <hr>
                  <form action="/bulkenroll" method="post" enctype="multipart/form-data">
                    <input type="file" id="csv" name="csv" > 
                    <input type="hidden" id="cid" name="cid" value="<%= course.id%>">
                <button type="submit" class="btn btn-primary"> upload</button> <br><br>
                <p>select suitable (.csv) file to enroll multiple users </p>
                </form> 
              </div>
              </td>
            </tr>
            <% } %>

        </tbody>
    </table><br>
    <div class="text-center" style="float: left;"><button type="submit" class="btn btn-danger" style="color: white;">Delete selected courses</button></div>   
</form> 
      </div>
      
        </div>
    </div>
</div>
<div style="margin-top: 15%;">
<% include ../viewcommn/footer.ejs %>
</div>
<script src="../../javascripts/popup.js">
</script>

<script>
    function Delete() {
        alert("Course X deleted successfully");
    }
</script>
<script>
  function myFunction(name) {
    var x = document.getElementById(name);    
    if (x.style.display === "none") {
      x.style.display = "block";
    } else {
      x.style.display = "none";
    }
  }
  </script> 
</body>


</html>